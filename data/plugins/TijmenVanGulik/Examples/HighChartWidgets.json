{"id":"tijmenvangulik_examples_HighChartWidgets","name":"Example high chart widgets","description":"Example how to write simple widgets using High Charts. (Charts and gauges)","version":"1.0","author":"Tijmen van Gulik","url":"https://tijmenvangulik.github.io/Ergometerspace/data/plugins/TijmenVanGulik/Examples/HighChartWidgets.json","script":"var __extends = (this && this.__extends) || (function () {\n    var extendStatics = Object.setPrototypeOf ||\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar tijmenvangulik_examples_valuewidgets;\n(function (tijmenvangulik_examples_valuewidgets) {\n    /*------------------------------------------------------------------------------\n        Stroke phase value widget example\n    ------------------------------------------------------------------------------*/\n    var ExamplePhaseValueWidget = (function (_super) {\n        __extends(ExamplePhaseValueWidget, _super);\n        function ExamplePhaseValueWidget(controller) {\n            var _this = _super.call(this, controller) || this;\n            _this.caption = \"Phase2\"; //menu item or window caption    \n            return _this;\n        }\n        ExamplePhaseValueWidget.prototype.strokePhaseUpdate = function (phase, duration) {\n            this.valueText = phase.displayText;\n        };\n        ExamplePhaseValueWidget.prototype.loaded = function () {\n            _super.prototype.loaded.call(this);\n            pm3.monitor.pubsubs.subNewStrokePhase(this, this.strokePhaseUpdate);\n        };\n        ExamplePhaseValueWidget.prototype.beforeUnload = function () {\n            _super.prototype.beforeUnload.call(this);\n            pm3.monitor.pubsubs.unsubNewStrokePhase(this,this.strokePhaseUpdate);\n        };\n        ExamplePhaseValueWidget.prototype.initControl = function () {\n            _super.prototype.initControl.call(this);\n            this.labelText = \"Phase2\"; //label before value\n        };\n        return ExamplePhaseValueWidget;\n    }(ergometerWidgets.StrokeValueWidget));\n    /*------------------------------------------------------------------------------\n        Stroke power widget\n        note the base class  StrokeValueWidget connects the strokeDataUpdate to the event using\n        pm3.monitor.pubsubs.subStrokeDataUpdate(this, this.strokeDataUpdate);\n        see the ExamplePhaseValueWidget widget how to attach to events\n    ------------------------------------------------------------------------------*/\n    var ExampleStrokeValuePowerWidget = (function (_super) {\n        __extends(ExampleStrokeValuePowerWidget, _super);\n        function ExampleStrokeValuePowerWidget(controller) {\n            var _this = _super.call(this, controller) || this;\n            _this.caption = \"Power2\"; //no caption needed\n            return _this;\n        }\n        ExampleStrokeValuePowerWidget.prototype.strokeDataUpdate = function (strokeData) {\n            this.valueText = strokeData.power.toString();\n        };\n        ExampleStrokeValuePowerWidget.prototype.initControl = function () {\n            _super.prototype.initControl.call(this);\n            this.labelText = \"Power\";\n        };\n        return ExampleStrokeValuePowerWidget;\n    }(ergometerWidgets.StrokeValueWidget));\n    /*------------------------------------------------------------------------------\n        training data widget (or workout)\n        note the base class  StrokeValueWidget connects the trainingDataUpdate to the event using\n          pm3.monitor.pubsubs.subTrainingDataUpdate(this, this.trainingDataUpdate);\n        see the ExamplePhaseValueWidget widget how to attach to events\n    ------------------------------------------------------------------------------*/\n    var ExampleTrainingDataWidget = (function (_super) {\n        __extends(ExampleTrainingDataWidget, _super);\n        function ExampleTrainingDataWidget(controller) {\n            var _this = _super.call(this, controller) || this;\n            _this.caption = \"Workout2\";\n            return _this;\n        }\n        ExampleTrainingDataWidget.prototype.trainingDataUpdate = function (trainingData) {\n            if (trainingData.workoutType)\n                this.valueText = trainingData.workoutType.displayText;\n            else\n                this.valueText = '';\n            switch (trainingData.workoutType) {\n                case pm3.WorkoutTypes.FixedDistanceNoSplits:\n                case pm3.WorkoutTypes.FixtedDistanceSplits:\n                case pm3.WorkoutTypes.FixedDistanceInterval:\n                    this.valueText = this.valueText + ' ' + trainingData.distance.toString() + 'm';\n                    break;\n                case pm3.WorkoutTypes.FixedTimeNoSplits:\n                case pm3.WorkoutTypes.FixedTimeSplits:\n                case pm3.WorkoutTypes.FixedTimeInterval:\n                    this.valueText = this.valueText + ' ' + utilities.formatRelativeTime(trainingData.duration);\n                    break;\n            }\n            //skipp intervalType\n            if (trainingData.workoutType == pm3.WorkoutTypes.FixedTimeInterval ||\n                trainingData.workoutType == pm3.WorkoutTypes.FixedDistanceInterval ||\n                trainingData.workoutType == pm3.WorkoutTypes.VariableInterval) {\n                this.valueText = this.valueText + ' x' + trainingData.workoutIntervalCount.toString() +\n                    'rest ' + utilities.formatRelativeTime(trainingData.restTime);\n            }\n            if (trainingData.workoutState)\n                this.valueText = this.valueText + ' ' + trainingData.workoutState.displayText;\n            else\n                this.valueText = '';\n        };\n        ExampleTrainingDataWidget.prototype.initControl = function () {\n            _super.prototype.initControl.call(this);\n            this.labelText = \"Workout\";\n        };\n        return ExampleTrainingDataWidget;\n    }(ergometerWidgets.TrainingValueWidget));\n    /*------------------------------------------------------------------------------\n        Create and remove the widgets in the Plugin\n    ------------------------------------------------------------------------------*/\n    var ExamplePlugin = (function (_super) {\n        __extends(ExamplePlugin, _super);\n        function ExamplePlugin() {\n            return _super !== null && _super.apply(this, arguments) || this;\n        }\n        ExamplePlugin.prototype.init = function () {\n            //create the widget(s) on create\n            dashboard.widgetRegistry().register(ExamplePhaseValueWidget, 'tijmenvangulik_examples_StrokePhaseWidget', 'Phase', ['Examples']);\n            dashboard.widgetRegistry().register(ExampleStrokeValuePowerWidget, 'tijmenvangulik_examples_StrokeValuePowerWidget', 'Power', ['Examples']);\n            dashboard.widgetRegistry().register(ExampleTrainingDataWidget, 'tijmenvangulik_examples_TrainingDataWidget', 'Workout', ['Examples']);\n        };\n        ExamplePlugin.prototype.remove = function () {\n            dashboard.widgetRegistry().deregister('tijmenvangulik_examples_StrokePhaseWidget');\n            dashboard.widgetRegistry().deregister('tijmenvangulik_examples_StrokeValuePowerWidget');\n            dashboard.widgetRegistry().deregister('tijmenvangulik_examples_TrainingDataWidget');\n        };\n        return ExamplePlugin;\n    }(ExternalPlugin));\n    var plugin;\n    plugin = new ExamplePlugin();\n})(tijmenvangulik_examples_valuewidgets || (tijmenvangulik_examples_valuewidgets = {}));\n","styles":"","typeScript":"module tijmenvangulik_examples_valuewidgets { //make a name space to prevent mix ups\n\n/*------------------------------------------------------------------------------\n    Stroke phase value widget example\n------------------------------------------------------------------------------*/\n    class ExamplePhaseValueWidget extends ergometerWidgets.StrokeValueWidget {\n        \n        public strokePhaseUpdate(phase : pm3.StrokePhase, duration : number) {\n\t\t\tthis.valueText = phase.displayText;\n\t\t}\n        \n        public loaded() {\n          super.loaded();\n          pm3.monitor.pubsubs.subNewStrokePhase(this, this.strokePhaseUpdate);\n        }\n        public beforeUnload() {\n          super.beforeUnload();\n          pm3.monitor.pubsubs.unsubNewStrokePhase(this,this.strokePhaseUpdate);\n        }\n\n\t\tpublic initControl() {\n            super.initControl();\n        \tthis.labelText = \"Phase2\"; //label before value\n\t\t}\n\t\tconstructor (controller : dashboard.Controller) {\n        \tsuper(controller);\n        \tthis.caption = \"Phase2\"; //menu item or window caption    \n\t\t}    \n    }\n/*------------------------------------------------------------------------------\n    Stroke power widget\n    note the base class  StrokeValueWidget connects the strokeDataUpdate to the event using\n    pm3.monitor.pubsubs.subStrokeDataUpdate(this, this.strokeDataUpdate);\n    see the ExamplePhaseValueWidget widget how to attach to events\n------------------------------------------------------------------------------*/\n    class ExampleStrokeValuePowerWidget  extends ergometerWidgets.StrokeValueWidget {\n\t\t\n\t\tpublic strokeDataUpdate(strokeData : pm3.StrokeData) {\n\t\t\tthis.valueText = strokeData.power.toString();\n\t\t}\n\n\t\tpublic initControl() {\n\t\t\tsuper.initControl();\n \t\t\tthis.labelText = \"Power\";\n\n\t\t}\n\t\tconstructor (controller : dashboard.Controller) {\n\t\t\tsuper(controller);\n\t\t\tthis.caption = \"Power2\";//no caption needed\n\t\t}\n\t} \n\t\n/*------------------------------------------------------------------------------\n    training data widget (or workout)\n    note the base class  StrokeValueWidget connects the trainingDataUpdate to the event using\n      pm3.monitor.pubsubs.subTrainingDataUpdate(this, this.trainingDataUpdate);\n    see the ExamplePhaseValueWidget widget how to attach to events\n------------------------------------------------------------------------------*/\n    class ExampleTrainingDataWidget  extends ergometerWidgets.TrainingValueWidget {\n\n\t\tpublic trainingDataUpdate(trainingData : pm3.TrainingData) {\n\t\t\tif (trainingData.workoutType)\n\t\t\t\tthis.valueText = trainingData.workoutType.displayText\n\t\t\telse this.valueText = '';\n\n\t\t\tswitch (trainingData.workoutType ) {\n\t\t\t\tcase pm3.WorkoutTypes.FixedDistanceNoSplits :\n\t\t\t\tcase pm3.WorkoutTypes.FixtedDistanceSplits :\n\t\t\t\tcase pm3.WorkoutTypes.FixedDistanceInterval :\n\t\t\t\t  \tthis.valueText=this.valueText+' '+trainingData.distance.toString()+'m';\n\t\t\t\t  \tbreak;\n\t\t\t\tcase pm3.WorkoutTypes.FixedTimeNoSplits :\n\t\t\t\tcase pm3.WorkoutTypes.FixedTimeSplits :\n\t\t\t\tcase pm3.WorkoutTypes.FixedTimeInterval :\n\t\t\t\t  \tthis.valueText=this.valueText+' '+ utilities.formatRelativeTime(trainingData.duration);\n\t\t\t\t  \tbreak;\n\t\t\t}\n\t\t\t//skipp intervalType\n\t\t\tif (trainingData.workoutType==pm3.WorkoutTypes.FixedTimeInterval ||\n\t\t\t\ttrainingData.workoutType==pm3.WorkoutTypes.FixedDistanceInterval || \n\t\t\t\ttrainingData.workoutType==pm3.WorkoutTypes.VariableInterval) {\n\t\t\t\tthis.valueText= this.valueText+' x'+trainingData.workoutIntervalCount.toString()+\n\t\t\t\t\t\t\t\t'rest '+utilities.formatRelativeTime(trainingData.restTime);\n\t\t\t}\n\t\t\tif (trainingData.workoutState)\n\t\t\t\tthis.valueText= this.valueText+' '+trainingData.workoutState.displayText\n\t\t\telse this.valueText='';\n\n\t\t}\n\n\t\tpublic initControl() {\n\t\t\tsuper.initControl();\n\t\t\tthis.labelText = \"Workout\";\n\n\t\t}\n\t\tconstructor (controller : dashboard.Controller) {\n            super(controller);\n\t\t\tthis.caption = \"Workout2\";\n\t\t\t\n\t\t}\n\t}\n\n/*------------------------------------------------------------------------------\n    Create and remove the widgets in the Plugin\n------------------------------------------------------------------------------*/\n    class ExamplePlugin extends ExternalPlugin {\n        \n        public init() {\n            //create the widget(s) on create\n            dashboard.widgetRegistry().register(ExamplePhaseValueWidget,'tijmenvangulik_examples_StrokePhaseWidget','Phase',['Examples']);\n            dashboard.widgetRegistry().register(ExampleStrokeValuePowerWidget,'tijmenvangulik_examples_StrokeValuePowerWidget','Power',['Examples']);\n            dashboard.widgetRegistry().register(ExampleTrainingDataWidget,'tijmenvangulik_examples_TrainingDataWidget','Workout',['Examples']);\n\n        }\n        public remove() {\n            dashboard.widgetRegistry().deregister('tijmenvangulik_examples_StrokePhaseWidget');\n            dashboard.widgetRegistry().deregister('tijmenvangulik_examples_StrokeValuePowerWidget');\n            dashboard.widgetRegistry().deregister('tijmenvangulik_examples_TrainingDataWidget');\n        }               \n    }\n\n    var plugin : ExamplePlugin;\n    plugin = new ExamplePlugin();\n    \n}\n\n\n    ","html":""}